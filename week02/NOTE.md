# 每周总结可以写在这里

本周两节课，
第一节课是对编程语言通识部分的介绍，主要是产生式的写法，重点介绍了 BNF 范式。但是重要是不是 BNF 范式的写法，而是理解产生式的一般表示方式。因为大部分语言规范都不是任何的已知范式，但是逻辑上大体差不多。这部分对阅读 JS 规范特别重要。然后介绍了一些图灵完备性，动态/静态语言，强类型/弱类型语言的区分方式和优缺点。

第二节课正式进入了 JS 的学习部分。老师在之前也提到过，本次教学的顺序是从 JS 中最小的原子部分到最大的程序部分。而不是重学前端中从文法/语法、运行时两个维度去讲。其实不同的讲解顺序，也是对 JS 的不同维度的理解。
JS 的第一节课，老师讲了 JS 最小的部分：Atom，从另一个维度看也就是词法。解释了四种 JS 规范中的词法为什么这么复杂，以及如何更合理的去理解词法。再之后就是对词法中四种 token 的详细讲解。

老师安排的作业还是很有针对性的，一三两道题目都需要看 JS 规范，可以借机熟练产生式的相关知识，第二题可以更理解 unicode 字符集和字符编码的关系。有点难受的是，本来觉得对产生式的阅读已经没什么障碍了，但是字符串字面量中的一个表示完全没看出来是什么意思。

# 编程语言通识

## 语言按语法分类

- 非形式语言
  - 中文、英文
- 形式语言（乔姆斯基谱系）
  - 0 型 无限制文法
  - 1 型 上下文相关文法
  - 2 型 上下文无关文法
  - 3 型 正则文法

### 无限制文法

等号左边和右边都可以有多个非终结符, ?::=?
比如
<a> <b> ::= "d" <c

### 上下文相关文法

等号左边和右边可以有多个非终结符，但是只有中间那个终结符可以变
?<a>? ::= ?<b>?

### 上下文无关文法

等号左边只能有一个终结符
<a> ::= ?

现在的编程语言大部分都是这类，在有些细节地方可能会违背。但在词法、语法解析过程中都可以通过某种方式解决

### 正则文法

能用正则表达式解析的文法。只允许左递归
<a> ::= <a>? 这种是符合的
<a> ::= ?<a> 这种是不行的，因为这个是右递归

## 产生式

如何来表示各种不同的文法，这就需要产生式。这里介绍最基本的产生式 BNF。

- 用尖括号括起来的部分表示语法结构名
- 语法结构分成基础结构和需要其他语法结构定义的复合结构
  - 基础结构称为终结符
  - 复合结构称为非终结符
- 引号和中间的字符表示终结符
- 可以有括号
- \*表示重复多次
- |表示或
- +表示至少一次

### 定义一门最简单的，只能用 a,b 组成的语言

"a" "b"

<Program>:= "a"+ | "b" |
这种只能表示多个 a 或者多个 b，那如何表示 ab 混合呢

**产生式中有个非常重要的东西是递归**

<Program>:= <Program> "a"+ | <Program> "b"+

如上，<Program>之后不需要任何符号，直接跟"a"+，表示递归

### 四则运算表达式定义

<Number>::="0" | "1" | ... | "9"

<DecimalNumber> ::= "0" | (("1"|"2"|...|"9")<Number>)

<MultiExpression> ::= <DecimalNumber> |
<MultiExpression> "\*" <DecimalNumber> |
<MultiExpression> "/" <DecimalNumber>

<AddExpression> ::= <MultiExpression> |
<AddExpression> "+" <MultiExpression> |
<AddExpression> "-" <MultiExpression>

加法运算就是四则运算的表达式了

当然，BNF 的规范本身并不重要，因为大部分语言的都不是用 BNF 写的，而是自己发明了一套产生式的写法，
但是大体逻辑是相同的，所以基本都是能看懂的

## 图灵完备性

- 命令式 - 图灵机
  - goto
  - if 和 while
- 声明式 - lambda
  - 递归

## 类型系统

### 动态和静态

动态是指类型在运行时才确定的

静态是指类型在编译前就确定的

### 强类型和弱类型

会隐式转换的都是弱类型

不会隐式转换的是强类型

## 一般命令式编程语言的结构

1. Atom
2. Expression
3. Statement
4. Structure
5. Program

# JavaScript

JS 的组成结构

## 源码

JS 的源码可以是任何 Unicode 字符

## Atom

WhiteSpace
LineTerminator
Comment
Token

### WhiteSpace

六类

- TAB
- VT
- SP
- NBSP
- ZWNBSP
- USP

建议只用 SP,特殊情况下使用 NBSP

### LineTerminator

- LINE FEED (LF) 其实就是\n
- CR 回车，也就是\r
- LS unicode 的换行
- PS unicode 的段落分隔符

建议只用 LF

### Comment

单行注释和多行注释，没什么好讲的

### Token

标识符分为

- keyword 关键字
- punctuator 符号
- Identifier 标识符
- literal 直接量

#### Identifier

标识符分为变量名和属性名两种。其中变量名不能和关键字重合，属性名可以和关键字重合
比如 `let class = 3`是不可以的，但是`let obj = {} obj.class = 3`是可以的

#### punctuator

符号，没什么好讲的

#### Literal

##### Number

数字分为二进制、八进制、十进制、十六进制四种写法

1. 二进制以 0b 开头，如 0b0010。转换为十进制表示 2
2. 八进制以 0o 开头，如 0o0010。 转换为十进制 8
3. 十六进制以 0x 开头，如 0x0011。转换为十进制表示 17
4. 十进制没有任何前缀

二进制、八进制、十六进制可以前面加 0，十进制不可以

十进制可以包含小数，其它不可以

##### String

String 包含单引号字符串、双引号字符串、字符串模板

##### 其它

- Boolean
- Undefined
- Null
- Symbol
- Object

Boolean、Undefined、Null 没什么好讲的，Symbol 和 Object 不讲
