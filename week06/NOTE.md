# 每周总结可以写在这里

本周以写代码为主，知识上的东西比较少

### 根据 response 返回的 body 生成 html 树状结构

生成 html 树状结构，在浏览器中叫生成 dom，理论上似乎应该分为两步，词法分析和语法分析，但在实际解析过程中只操作了一遍。

根据状态机的状态，每个词对应的语义都可以被准确解析，所以在生成词法的过程中，也同步生成了语法。这可能也是理论实现和实际算法的区别

根据生成的语法结构，最终生成一棵以 document 节点为根节点的树

### 计算 css

计算 css 的过程是在将节点开始标签插入树时

css 解析只处理了 style 标签。根据 style 标签的内容，使用`css`库将其解析为 ast，然后在将标签插入树时判断每条 css 规则是否与标签匹配，如果匹配，计算 css 规则的优先级，如果优先级大于或等于现有相同规则优先级（如果存在），使用新的优先级和值替换原有的优先级和值，最后将匹配的 css 规则和值挂载到标签元素上
